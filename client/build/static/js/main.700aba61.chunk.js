(window["webpackJsonplinktree-clone"]=window["webpackJsonplinktree-clone"]||[]).push([[0],{21:function(e,t,a){e.exports=a.p+"static/media/edit.320800a3.svg"},31:function(e,t,a){},36:function(e,t,a){e.exports=a.p+"static/media/trash.b740e4d1.svg"},40:function(e,t,a){e.exports=a.p+"static/media/default.6a69c88b.png"},43:function(e,t,a){e.exports=a(81)},80:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(18),c=a.n(l),s=a(5),i=function(){return r.a.createElement("div",{className:"green-container"},r.a.createElement("div",{className:"buttons"},r.a.createElement(s.b,{to:"/login",className:"sign-in-button"},r.a.createElement("p",null,"Log In")),r.a.createElement("span",{id:"or"},"or"),r.a.createElement(s.b,{to:"/signup",className:"sign-in-button"},r.a.createElement("p",null,"Sign Up"))))},o=a(1),m=a(2),u=a.n(m),d=function(e){var t=e.username,a=e.avatar;return r.a.createElement("header",{className:"userContainer"},r.a.createElement("img",{className:"avatarStyle",src:a,alt:"user avatar"}),r.a.createElement("h2",null,"".concat(t)))},p=function(e){var t=e.link;return r.a.createElement("div",{className:"link"},r.a.createElement("a",{className:"linkContainer",href:t.url.includes("//")?t.url:"//".concat(t.url),target:"_blank",rel:"noopener noreferrer"},t.linkTitle))},E=function(){return r.a.createElement("div",{className:"green-container"},r.a.createElement("div",{className:"userContainer"},r.a.createElement("h1",null,"Profile does not exist")))},h=a(10),b=a.n(h),v=(a(31),function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(""),i=Object(o.a)(s,2),m=i[0],h=i[1],v=Object(n.useState)(!0),g=Object(o.a)(v,2),f=g[0],k=g[1],O=Object(n.useState)(!1),N=Object(o.a)(O,2),j=N[0],w=N[1],S=Object(n.useState)(1),y=Object(o.a)(S,2),x=y[0],C=y[1],T=Object(n.useState)(""),L=Object(o.a)(T,2),U=L[0],I=L[1];return Object(n.useEffect)(function(){u.a.get("/users/".concat(e.match.params.username)).then(function(e){c(e.data.links),h(e.data.username),C(e.data.theme),k(!1),I(e.data.avatar)}).catch(function(e){console.log(e.response),w(!0)})},[e.match.params.username]),f&&!j?r.a.createElement("div",{className:"green-container"},r.a.createElement("div",{className:"loader"},r.a.createElement(b.a,{sizeUnit:"px",size:150,color:"rgb(31, 28, 28)",loading:!0}))):j?r.a.createElement(E,null):r.a.createElement("div",{className:1===x?"green-container":"theme-".concat(x)},r.a.createElement(d,{username:m,avatar:U}),r.a.createElement("div",{className:"linksList"},l.length>0?l.map(function(e){return r.a.createElement(p,{key:e._id,link:e})}):r.a.createElement("h1",{className:"empty-linktree"},"User's ManyLinks is empty!")))}),g=a(11),f=a(20);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var O=function(e,t,a){var r=Object(n.useState)(e),l=Object(o.a)(r,2),c=l[0],s=l[1],i=Object(n.useState)({}),m=Object(o.a)(i,2),u=m[0],d=m[1],p=Object(n.useState)(!1),E=Object(o.a)(p,2),h=E[0],b=E[1];return Object(n.useEffect)(function(){h&&(0===Object.keys(u).length?(a(),b(!1)):b(!1))},[u,h,a]),{handleSubmit:function(e){e.preventDefault();var a=t(c);d(a),b(!0)},handleChange:function(e){s(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach(function(t){Object(f.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},c,Object(f.a)({},e.target.name,e.target.value)))},values:c,errors:u,isSubmitting:h,setValues:s}},N=function(e){var t={};return Object.keys(e).forEach(function(a){switch(a){case"username":e.username||(t.username="Required username.");break;case"email":e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Invalid email address."):t.email="Required Email.";break;case"password":e.password?e.password.length<6&&(t.password="Password must be at least 6 characters."):t.password="Required Password.";break;case"url":e.url?/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([-.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/i.test(e.url)||(t.url="Invalid URL."):t.url="Required URL.";break;case"linkTitle":e.linkTitle||(t.linkTitle="Required Title.")}}),t},j=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),s=Object(o.a)(c,2),i=s[0],m=s[1],d=O({username:"",password:"",email:""},N,function(){m(!1),l(!1),u.a.post("/users/register",h).then(function(e){localStorage.setItem("auth-token",e.data),window.location="/admin"}).catch(function(e){var t=e.response.data;"Email already exists"===t&&m(!0),"Username already exists"===t&&l(!0)})}),p=d.handleSubmit,E=d.handleChange,h=d.values,b=d.errors,v=d.isSubmitting;return r.a.createElement("div",{className:"green-container"},r.a.createElement("div",{className:"error-msg"},r.a.createElement("p",null,a?"Username already exists":""),r.a.createElement("p",null,i?"Email already exists":""),r.a.createElement("p",null,b.username?b.username:""),r.a.createElement("p",null,b.email?b.email:""),r.a.createElement("p",null,b.password?b.password:"")),r.a.createElement("form",{onSubmit:p},r.a.createElement("div",{className:"signup-buttons"},r.a.createElement("input",{type:"text",name:"username",value:h.username,onChange:E,placeholder:"Username",className:b.username?"user-input error-text":"user-input"}),r.a.createElement("input",{type:"text",name:"email",value:h.email,onChange:E,placeholder:"Email",className:b.email?"user-input error-text":"user-input"}),r.a.createElement("input",{type:"password",name:"password",value:h.password,onChange:E,placeholder:"Password",autoComplete:"password",className:b.password?"user-input error-text":"user-input"}),r.a.createElement("button",{type:"submit",disabled:v,className:"user-submit"},"Sign Up"))))},w=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),s=Object(o.a)(c,2),i=s[0],m=s[1],d=O({username:"",password:""},N,function(){l(!1),m(!1),u.a.post("/users/login",h).then(function(e){localStorage.setItem("auth-token",e.data),window.location="/admin"}).catch(function(e){var t=e.response.data;"Username/Email not found"===t&&l(!0),"Invalid password"===t&&m(!0)})}),p=d.handleSubmit,E=d.handleChange,h=d.values,b=d.errors,v=d.isSubmitting;return r.a.createElement("div",{className:"green-container"},r.a.createElement("div",{className:"error-msg"},r.a.createElement("p",null,a?"Username/Email not found":""),r.a.createElement("p",null,i?"Invalid Password":""),r.a.createElement("p",null,b.username?"Required Username/Email.":""),r.a.createElement("p",null,b.password?b.password:"")),r.a.createElement("form",{onSubmit:p},r.a.createElement("div",{className:"login-buttons"},r.a.createElement("input",{type:"text",name:"username",value:h.username,onChange:E,placeholder:"Username or Email",className:b.username?"user-input error-text":"user-input"}),r.a.createElement("input",{type:"password",name:"password",value:h.password,onChange:E,placeholder:"Password",autoComplete:"password",className:b.password?"user-input error-text":"user-input"}),r.a.createElement("button",{type:"submit",disabled:v,className:"user-submit"},"Log In"))))},S=function(){return r.a.createElement("div",null,r.a.createElement("h1",{className:"footer"},localStorage.getItem("auth-token")?r.a.createElement(s.b,{to:"/admin"},"ManyLinks"):r.a.createElement(s.b,{to:"/"},"ManyLinks")))},y=function(e){var t=e.username,a={linkTitle:"",url:""},l={headers:{"auth-token":localStorage.getItem("auth-token")}},c=Object(n.useState)(!1),s=Object(o.a)(c,2),i=s[0],m=s[1],d=O(a,N,function(){m(!1),u.a.patch("/users/".concat(t),h,l).then(function(e){g(a),m(!0),setTimeout(function(){return m(!1)},1500)}).catch(function(e){console.log(e)})}),p=d.handleSubmit,E=d.handleChange,h=d.values,b=d.errors,v=d.isSubmitting,g=d.setValues;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"link-error-msg"},r.a.createElement("p",{id:"added"},i?"New Link Added To Your ManyLinks!":""),r.a.createElement("p",null,b.linkTitle?b.linkTitle:""),r.a.createElement("p",null,b.url?b.url:"")),r.a.createElement("form",{onSubmit:p},r.a.createElement("div",{className:"newlink-buttons"},r.a.createElement("input",{type:"text",name:"linkTitle",value:h.linkTitle,onChange:E,placeholder:"Title",className:b.linkTitle?"user-input error-text":"user-input"}),r.a.createElement("input",{type:"text",name:"url",value:h.url,onChange:E,placeholder:"URL",className:b.url?"user-input error-text":"user-input"}),r.a.createElement("button",{type:"submit",disabled:v,className:"user-submit"},"Add to Links"))))},x=function(e){var t=e.admin,a=e.settings,n=e.edit;return r.a.createElement("nav",{className:"admin-header"},r.a.createElement(s.b,{to:"/admin",className:"header-links ".concat(t)},"Home"),r.a.createElement(s.b,{to:"/settings",className:"header-links ".concat(a)},"Design"),r.a.createElement(s.b,{to:"/edit",className:"header-links ".concat(n)},"Links"),r.a.createElement("h1",{className:"header-links header-logout",onClick:function(){localStorage.removeItem("auth-token"),window.location="/"}},"Log Out"))},C=function(e){var t=e.username;return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{admin:"active"}),r.a.createElement("div",null),r.a.createElement("div",{className:"flex-container"},r.a.createElement(y,{username:t}),r.a.createElement(s.b,{to:"/".concat(t),target:"_blank",className:"sign-in-button"},t,"'s ManyLinks")))},T=a(21),L=a.n(T),U=a(36),I=a.n(U),P=a(14),A=function(e){var t=e.id,a=e.username,l=e.link,c=e.rerender,s={_id:t,linkTitle:l.linkTitle,url:l.url},i={headers:{"auth-token":localStorage.getItem("auth-token")}},m=Object(n.useState)(!1),d=Object(o.a)(m,2),p=d[0],E=d[1],h=Object(n.useState)(!1),b=Object(o.a)(h,2),v=b[0],g=b[1],f=O(s,N,function(){u.a.patch("/users/".concat(a,"/editlink"),w,i).then(function(e){!0===p&&y(),!0===v&&x()}).catch(function(e){console.log(e)})}),k=f.handleSubmit,j=f.handleChange,w=f.values,S=f.errors,y=function(){E(!p)},x=function(){g(!v)};return r.a.createElement("div",{className:"edit-link-container"},r.a.createElement("span",{className:"delete-button",onClick:function(){u.a.patch("/users/".concat(a,"/deletelink"),{_id:t},i).then(function(e){c()}).catch(function(e){console.log(e)})}},r.a.createElement(P.a,{src:I.a})),r.a.createElement("div",{className:"edit-linkTitle"},r.a.createElement("div",{className:"edit-linkTitle-wrap"},p?r.a.createElement("form",{onSubmit:k},r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"linkTitle",value:w.linkTitle,onChange:j,autoFocus:"autofocus",onBlur:k,placeholder:"Title",className:S.linkTitle?"error-url-text":"edit-link-input"}))):w.linkTitle),r.a.createElement("span",{className:"edit-button",onClick:y},p?"":r.a.createElement(P.a,{src:L.a}))),r.a.createElement("div",{className:"edit-url"},r.a.createElement("div",{className:"edit-url-wrap"},v?r.a.createElement("form",{onSubmit:k},r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"url",value:w.url,onChange:j,autoFocus:"autofocus",onBlur:k,placeholder:"URL",className:S.url?"error-url-text":"edit-link-input"}))):w.url),r.a.createElement("span",{className:"edit-button",onClick:x},v?"":r.a.createElement(P.a,{src:L.a}))))},z=function(e){var t=e.username,a=Object(n.useState)([]),l=Object(o.a)(a,2),c=l[0],s=l[1],i=Object(n.useState)(!0),m=Object(o.a)(i,2),d=m[0],p=m[1],E=Object(n.useState)(!1),h=Object(o.a)(E,2),v=h[0],g=h[1],f=function(){g(!v)};return Object(n.useEffect)(function(){u.a.get("/users/".concat(t)).then(function(e){s(e.data.links),p(!1)}).catch(function(e){console.log(e.response)})},[t,v]),d?r.a.createElement("div",{className:"green-container"},r.a.createElement("div",{className:"loader"},r.a.createElement(b.a,{sizeUnit:"px",size:150,color:"rgb(31, 28, 28)",loading:!0}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{edit:"active"}),r.a.createElement("div",{className:"linksList"},c.length>0?c.map(function(e){return r.a.createElement(A,{key:e._id,id:e._id,link:e,username:t,rerender:f})}):r.a.createElement("h1",null,"Your ManyLinks is empty, add a link and try again.")))},R=function(e){var t=e.activeTheme,a=e.username,n=e.theme,l=e.rerender,c={headers:{"auth-token":localStorage.getItem("auth-token")}};return r.a.createElement("div",{className:"".concat(t===n?"active-theme":"default-theme")},r.a.createElement("div",{className:"box",onClick:function(){u.a.patch("/users/".concat(a,"/theme"),{theme:n},c).then(function(e){l(n)}).catch(function(e){console.log(e)})}},r.a.createElement("div",{className:"theme-".concat(n,"-thumb")},r.a.createElement("span",{className:"dot"}))))},F=a(40),M=a.n(F),D=a(41),_=a.n(D),q=a(42),B=a.n(q),Z=function(e){var t=e.closeModal,a=e.username,l=e.avatar,c=e.rerender,s=Object(n.useState)(null),i=Object(o.a)(s,2),m=i[0],d=i[1],p=Object(n.useState)(null),E=Object(o.a)(p,2),h=E[0],b=E[1],v={headers:{"auth-token":localStorage.getItem("auth-token")}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal-avatar-container"},r.a.createElement("div",{className:"edit-avatar-container"},r.a.createElement(B.a,{width:250,height:250,onCrop:function(e){d(e)},onClose:function(){d(null)},src:l,onBeforeFileLoad:function(e){if(e.target.files[0].size>5e6)alert("File size is too big!"),e.target.value="";else{var t=e.target.files[0],a=new FormData;a.append("userAvatar",t);var n=a.getAll("userAvatar")[0].name;b(n)}}}))),r.a.createElement("div",{className:"avatar-buttons-container"},r.a.createElement("div",{className:"avatar-buttons"},r.a.createElement("button",{onClick:t},"Cancel"),r.a.createElement("button",{onClick:function(){var e=function(e){for(var t=atob(e.split(",")[1]),a=new ArrayBuffer(t.length),n=new Uint8Array(a),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return new Blob([a],{type:"image/jpeg"})}(m),n=new FormData;n.append("userAvatar",e,h),u.a.patch("/users/".concat(a,"/avatar"),n,v).then(function(e){c(m)}).catch(function(e){console.log(e.response)}),t()}},"Update"))))},H={content:{top:"45%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",width:"260px",height:"350px",background:"white",padding:"0px"},overlay:{backgroundColor:"rgba(47, 53, 62, 0.86)"}},J=function(e){var t=e.username,a=e.avatar,l=e.rerender,c=Object(n.useState)(!1),s=Object(o.a)(c,2),i=s[0],m=s[1];return r.a.createElement("div",null,a?r.a.createElement("input",{type:"image",src:a,alt:"avatar-select",className:"avatarStyle",onClick:function(){m(!0)}}):r.a.createElement("div",{className:"avatarStyle"},r.a.createElement(b.a,{sizeUnit:"px",size:96,color:"rgb(31, 28, 28)",loading:!0})),r.a.createElement(_.a,{isOpen:i,contentLabel:"Minimal Modal Example",style:H,ariaHideApp:!1},r.a.createElement(Z,{closeModal:function(){m(!1)},username:t,avatar:a,rerender:l})))},V=function(e){var t=e.username,a=e.avatar,l=Object(n.useState)(),c=Object(o.a)(l,2),s=c[0],i=c[1],m={headers:{"auth-token":localStorage.getItem("auth-token")}},d=Object(n.useState)(0),p=Object(o.a)(d,2),E=p[0],h=p[1],b=function(e){h(e)};return Object(n.useEffect)(function(){var e={headers:{"auth-token":localStorage.getItem("auth-token")}};u.a.get("/users/admin",e).then(function(e){h(e.data.theme),i(e.data.avatar)}).catch(function(e){console.log(e)})},[E,a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{settings:"active"}),r.a.createElement("div",{className:"settings-container"},r.a.createElement("div",{className:"avatar-container"},r.a.createElement("div",{className:"avatar"},r.a.createElement(J,{username:t,avatar:s,rerender:function(e){i(e)}})),r.a.createElement("div",{className:"avatar-form"},r.a.createElement("div",{className:"remove-button",onClick:function(){u.a.patch("/users/".concat(t,"/defaultAvatar"),{},m).then(function(e){i(M.a)}).catch(function(e){console.log(e.response)})}},"Reset Profile Picture"))),r.a.createElement("div",{className:"color-container"},r.a.createElement("h5",null,"Choose a Theme"),r.a.createElement("div",{className:"themes-container"},r.a.createElement(R,{activeTheme:E,username:t,theme:1,rerender:b}),r.a.createElement(R,{activeTheme:E,username:t,theme:2,rerender:b}),r.a.createElement(R,{activeTheme:E,username:t,theme:3,rerender:b}),r.a.createElement(R,{activeTheme:E,username:t,theme:4,rerender:b}),r.a.createElement(R,{activeTheme:E,username:t,theme:5,rerender:b}),r.a.createElement(R,{activeTheme:E,username:t,theme:6,rerender:b}),r.a.createElement(R,{activeTheme:E,username:t,theme:7,rerender:b}),r.a.createElement(R,{activeTheme:E,username:t,theme:8,rerender:b})))))},Y=function(e){var t=e.component,a=Object(n.useState)(""),l=Object(o.a)(a,2),c=l[0],s=l[1],i=Object(n.useState)(!0),m=Object(o.a)(i,2),d=m[0],p=m[1],E=Object(n.useState)(),h=Object(o.a)(E,2),v=h[0],g=h[1];Object(n.useEffect)(function(){var e={headers:{"auth-token":localStorage.getItem("auth-token")}};u.a.get("/users/admin",e).then(function(e){s(e.data.username),p(!1),g(e.data.avatar)}).catch(function(e){console.log(e)})},[c]);return d?r.a.createElement("div",{className:"green-container"},r.a.createElement("div",{className:"loader"},r.a.createElement(b.a,{sizeUnit:"px",size:150,color:"rgb(31, 28, 28)",loading:!0}))):r.a.createElement("div",{className:"green-container"},function(e){switch(e){case"admin":return r.a.createElement(C,{username:c});case"edit":return r.a.createElement(z,{username:c});case"settings":return r.a.createElement(V,{username:c,avatar:v});default:return null}}(t))},$=function(){var e=localStorage.getItem("auth-token");return r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/",render:function(){return e?r.a.createElement(g.a,{to:"/admin"}):r.a.createElement(i,null)}}),r.a.createElement(g.b,{path:"/admin",render:function(){return e?r.a.createElement(Y,{component:"admin"}):r.a.createElement(g.a,{to:"/"})}}),r.a.createElement(g.b,{path:"/signup",component:j}),r.a.createElement(g.b,{path:"/login",component:w}),r.a.createElement(g.b,{path:"/settings",render:function(){return e?r.a.createElement(Y,{component:"settings"}):r.a.createElement(g.a,{to:"/"})}}),r.a.createElement(g.b,{path:"/edit",render:function(){return e?r.a.createElement(Y,{component:"edit"}):r.a.createElement(g.a,{to:"/"})}}),r.a.createElement(g.b,{path:"/:username",component:v}),r.a.createElement(g.b,{component:E})),r.a.createElement(g.b,{path:"/",component:S})))};a(80);c.a.render(r.a.createElement($,null),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.700aba61.chunk.js.map